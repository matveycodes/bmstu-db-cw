\usepackage{etoolbox}
\usepackage{upquote}
\PassOptionsToPackage{factor=2000}{microtype}
\usepackage{csquotes}

% Отключение выравнивания по ширине для содержания
\makeatletter
\patchcmd{\@dottedtocline}
{\rightskip\@tocrmarg}
{\rightskip\@tocrmarg plus 4em \hyphenpenalty\@M}
{}{}
\makeatother

% Прямые кавычки в коде
\robustify{\texttt}
\let\originaltexttt\texttt
\begingroup
\catcode`'=\active
\catcode``=\active
\globaldefs1
\makeatletter
\renewrobustcmd{\texttt}[1]{%
	{%
			\everyeof{\noexpand}\endlinechar-1
			\expandafter\catcode\string``=\active
			\expandafter\catcode\string`'=\active
			\let'\textquotesingle
			\let`\textasciigrave
			\ifx\encodingdefault\upquote@OTone
				\ifx\ttdefault\upquote@cmtt
					\def'{\char13 }\def`{\char18 }%
				\fi
			\fi
			\scantokens{\originaltexttt{#1}}%
		}%
}%
\endgroup

\bibliography{bibliography}